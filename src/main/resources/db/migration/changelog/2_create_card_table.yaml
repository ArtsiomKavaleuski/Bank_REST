databaseChangeLog:
  - changeSet:
    id: 3
    author: koval-dev
    changes:
      - createTable:
        tableName: cards
        columns:
          - column:
            name: id
            type: BIGINT
            constraints:
              primaryKey: true
              nullable: false
          - column:
            name: card_number
            type: VARCHAR(255)
            constraints:
              nullable: false
          - column:
            name: expiry_date
            type: DATE
            constraints:
              nullable: false
          - column:
            name: status
            type: VARCHAR(8)
            constraints:
              nullable: false
          - column:
            name: balance
            type: DECIMAL(15,2)
            constraints:
              nullable: false
          - column:
            name: user_id
            type: BIGINT
            constraints:
              nullable: false

  - changeSet:
    id: 4
    author: koval-dev
    changes:
      - addForeignKeyConstraint:
        baseTableName: cards
        baseColumnNames: user_id
        referencedTableName: users
        referencedColumnNames: id
        constraintName: fk_user_card
        onDelete: CASCADE