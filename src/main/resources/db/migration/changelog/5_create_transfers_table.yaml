databaseChangeLog:
  - changeSet:
    id: 8
    author: koval-dev
    changes:
      - createTable:
        tableName: transfers
        columns:
          - column:
            name: id
            type: BIGINT
            constraints:
              primaryKey: true
              nullable: false
          - column:
            name: card_from
            type: BIGINT
            constraints:
              nullable: false
          - column:
            name: card_to
            type: BIGINT
            constraints:
              nullable: false
          - column:
            name: amount
            type: DECIMAL(15,2)
            constraints:
              nullable: false
          - column:
            name: description
            type: VARCHAR(255)
            constraints:
              nullable: true
          - column:
            name: created_at
            type: datetime
            constraints:
              nullable: false

  - changeSet:
    id: 9
    author: koval-dev
    changes:
      - addForeignKeyConstraint:
        baseTableName: transfers
        baseColumnNames: card_from
        referencedTableName: cards
        referencedColumnNames: id
        constraintName: fk_transfer_card_from
        onDelete: CASCADE

  - changeSet:
    id: 10
    author: koval-dev
    changes:
      - addForeignKeyConstraint:
        baseTableName: transfers
        baseColumnNames: card_to
        referencedTableName: cards
        referencedColumnNames: id
        constraintName: fk_transfer_card_from
        onDelete: CASCADE